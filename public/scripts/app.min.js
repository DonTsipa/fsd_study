var goBack=function(){window.history.back()},menu_expand=!1,menuButton=document.querySelector(".header__menuButton"),menu=document.querySelector(".header__navigation");menuButton.addEventListener("click",function(){menu_expand=menu.classList.contains("header__navigation_active")?(menu.classList.remove("header__navigation_active"),!1):(menu.classList.add("header__navigation_active"),!0)});var date_moved=!1;if(document.getElementById("date-from")){var picker=new Lightpick({field:document.getElementById("date-from"),secondField:document.getElementById("date-to"),singleDate:!1,format:"DD.MM.YYYY",autoclose:!1,footer:!0,minDate:moment(),maxDate:moment().add(1,"year"),locale:{buttons:{prev:"arrow_backward",next:"arrow_forward",close:"×",reset:"Очистить",apply:"Применить"}},onSelect:function(e,t){e&&e.format("Do MMMM YYYY"),t&&t.format("Do MMMM YYYY")}});document.querySelectorAll(".cards__date-label").forEach(function(e){return e.onclick=function(){var e=document.querySelector(".lightpick");16<parseInt(e.style.left.slice(0,-2))?e.style.left=parseInt(e.style.left)-16+"px":e.style="left: calc(50% - 160px); top: ".concat(parseInt(e.style.top)+15,"px;"),e.style.top=parseInt(e.style.top)+15+"px",date_moved=!0}})}var boxes=document.querySelectorAll(".dropdown"),focus=void 0;document.body.onclick=function(e){var t=e.target;focus&&(focus.contains(t)||(focus.querySelector(".dropdown__full").classList.remove("dropdown__full_visible"),focus=void 0)),menu_expand&&(menu.contains(t)||menuButton.contains(t)||menuButton==t||(menu.classList.remove("header__navigation_active"),menu_expand=!1))},boxes.forEach(function(t){t.querySelector(".cards__input").onclick=function(e){dropdown__full=t.querySelector(".dropdown__full"),focus=dropdown__full.classList.contains("dropdown__full_visible")?void dropdown__full.classList.remove("dropdown__full_visible"):(focus&&focus.querySelector(".dropdown__full").classList.remove("dropdown__full_visible"),dropdown__full.classList.add("dropdown__full_visible"),dropdown__full.parentElement)}});var more=document.querySelectorAll(".dropdown__button_more"),less=document.querySelectorAll(".dropdown__button_less");more.forEach(function(t){t.onclick=function(e){val=t.parentElement.querySelector(".dropdown__input").value++,t.parentElement.querySelector(".dropdown__button_less").style="opacity:1"}}),less.forEach(function(t){t.onclick=function(e){val=t.parentElement.querySelector(".dropdown__input").value,0<val&&(t.parentElement.querySelector(".dropdown__input").value--,val--),0==val?t.style="opacity:0.25":t.style="opacity:1"}});var actions=document.querySelectorAll(".dropdown__footer");actions.forEach(function(e){reset=e.querySelector(".dropdown__reset"),reset.onclick=function(){dropdown_full=e.parentElement,less=dropdown_full.querySelectorAll(".dropdown__button_less"),inputs=dropdown_full.querySelectorAll(".dropdown__input"),console.log(dropdown_full),inputs.forEach(function(e){return e.value=0}),less.forEach(function(e){e.style="opacity:0.25"})}}),firstGuest=function(e){return 0!=e&&(1==e?e+" гость":e<5?e+" гостя":e+" гостей")},secondGuest=function(e){return 0!=e&&(1==e?e+" ребенок":e<5?e+" ребенка":e+" детей")},thirdGuest=function(e){return 0!=e&&(1==e?e+" младенец":e<5?e+" младенца":e+" младенцев")};var applyGuest=document.querySelector(".dropdown__apply_guests");textChangeGuests=function(){expand=applyGuest.parentElement.parentElement.parentElement.querySelector(".cards__input");var e=expand.parentElement.querySelectorAll(".dropdown__input"),t=!1;text="",firstGuest(e[0].value)&&(text+=", "+firstGuest(e[0].value),t=!0),secondGuest(e[1].value)&&(text+=", "+secondGuest(e[1].value),t=!0),thirdGuest(e[2].value)&&(firstGuest(e[0].value)&&secondGuest(e[1].value)||(text+=", "+thirdGuest(e[2].value),t=!0)),t&&(text+="..."),text=text.substring(1),""==text&&(text="сколько гостей"),expand.querySelector(".cards__input-text").value=text,console.log("changed!")},applyGuest.onclick=function(){textChangeGuests(),expand.onclick()};var firstFacility=function(e){return 0!=e&&(1==e?e+" спальня":e<5?e+" спальни":e+" спальн")},secondFacility=function(e){return 0!=e&&(1==e?e+" кровать":e<5?e+" кровати":e+" кроватей")},thirdFacility=function(e){return 0!=e&&(1==e?e+" ванная комната":e<5?e+" ванных комнаты":e+" ванных комнат")},applyFacility=document.querySelector(".dropdown__apply_facilities");if(textChange=function(){expand=applyFacility.parentElement.parentElement.parentElement.querySelector(".cards__input");var e=expand.parentElement.querySelectorAll(".dropdown__input"),t=!1;text="",firstFacility(e[0].value)&&(text+=", "+firstFacility(e[0].value),t=!0),secondFacility(e[1].value)&&(text+=", "+secondFacility(e[1].value),t=!0),thirdFacility(e[2].value)&&(firstFacility(e[0].value)&&secondFacility(e[1].value)||(text+=", "+thirdFacility(e[2].value),t=!0)),t&&(text+="..."),text=text.substring(1),""==text&&(text="удобства"),expand.querySelector(".cards__input-text").value=text},applyFacility.onclick=function(){textChange(),expand.onclick()},document.getElementById("datepicker_single")){picker=new Lightpick({field:document.getElementById("datepicker_single"),singleDate:!1,format:"DD.MM.YYYY",autoclose:!0,hideOnBodyClick:!0,footer:!0,minDate:moment(),maxDate:moment().add(1,"year"),locale:{buttons:{prev:"arrow_backward",next:"arrow_forward",close:"×",reset:"Очистить",apply:"Применить"}},onSelect:function(e,t){e&&e.format("Do MMMM YYYY"),t&&t.format("Do MMMM YYYY")}});datepicker_move=function(){var e=document.querySelector(".lightpick");16<parseInt(e.style.left.slice(0,-2))?e.style.left=parseInt(e.style.left)-16+"px":e.style="left: calc(50% - 160px); top: ".concat(parseInt(e.style.top)+15,"px;"),e.style.top=parseInt(e.style.top)+15+"px"},document.querySelectorAll(".datepicker__label").forEach(function(e){e.addEventListener("click",datepicker_move)})}picker=new Lightpick({field:document.getElementById("birthdate"),singleDate:!0,format:"DD.MM.YYYY",autoclose:!0,hideOnBodyClick:!0,footer:!0,maxDate:moment(),locale:{buttons:{prev:"arrow_backward",next:"arrow_forward",close:"×",reset:"Очистить",apply:"Применить"}},onSelect:function(e,t){e&&e.format("Do MMMM YYYY"),t&&t.format("Do MMMM YYYY")}});datepicker_move=function(){var e=document.querySelector(".lightpick");16<parseInt(e.style.left.slice(0,-2))?e.style.left=parseInt(e.style.left)-16+"px":e.style="left: calc(50% - 160px); top: ".concat(parseInt(e.style.top)+15,"px;"),e.style.top=parseInt(e.style.top)+15+"px"},document.querySelectorAll(".datepicker__label").forEach(function(e){e.addEventListener("click",datepicker_move)});var button=document.querySelector(".header__filtersButton"),rooms=document.querySelector(".rooms"),main=document.querySelector(".main_theme-search");button.addEventListener("click",function(){var e=document.querySelector(".filters_theme-search");e.classList.contains("filters_theme-search_active")?(e.classList.remove("filters_theme-search_active"),rooms.classList.remove("rooms_disable"),main.style="0"):(e.classList.add("filters_theme-search_active"),rooms.classList.add("rooms_disable"),main.style="max-height:760px")});var sliders=document.querySelectorAll(".range__slider"),priceMin=document.getElementById("price-min"),priceMax=document.getElementById("price-max"),priceMininput=document.getElementById("range__priceMin"),priceMaxinput=document.getElementById("range__priceMax"),white_space=function(e){return e.toString().replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 ")};sliders.forEach(function(e){noUiSlider.create(e,{start:[priceMininput.value,priceMaxinput.value],connect:!0,step:500,range:{min:0,max:2e4}}),e.noUiSlider.on("update",function(e,t){value=Math.round(e[t]),t?(priceMax.innerHTML=white_space(value)+"Р",priceMaxinput.value=value):(priceMin.innerHTML=white_space(value)+"Р",priceMininput.value=value)})}),(sliders=document.querySelectorAll(".roomcard__slider")).forEach(function(n){var r=n.querySelectorAll(".roomcard__paginationButton"),a=n.querySelector(".roomcard__images");r[0].classList.add("roomcard__paginationButton_active"),r.forEach(function(e,t){e.addEventListener("click",function(e){n.querySelector(".roomcard__paginationButton_active").classList.remove("roomcard__paginationButton_active"),e.target.classList.add("roomcard__paginationButton_active"),a.style.right="".concat(100*t,"%")})}),a.addEventListener("mouseover",function(e){function t(){o<r.length-1?r[1+o].click():r[0].click()}var n=null,o=a.style.right.slice(0,-1)/100;n=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?setTimeout(t,500):setTimeout(t,1e3),a.addEventListener("mouseout",function(){clearTimeout(n)})}),a.ondragstart=function(){return!1},a.addEventListener("mousedown",function(e){function t(e){e.target.onclick=function(e){e.preventDefault()};var t=o-e.clientX,n=a.style.right.slice(0,-1)/100;t<0?0<n&&r[n-1].click():n<r.length-1&&r[1+n].click()}var o=e.clientX;a.style.right;a.addEventListener("mousemove",t),document.addEventListener("mouseup",function(){a.removeEventListener("mousemove",t),e.target.onclick=function(){}})})});var paginationButtons=document.querySelectorAll(".pagination__button_number"),pageInput=document.querySelector("#page"),filtersForm=document.querySelector("#filters"),active=pageInput.value,last=paginationButtons[paginationButtons.length-1].querySelector(".pagination__number").innerText,page="";1<active?active==last?paginationButtons[4].classList.add("pagination__button_active"):paginationButtons[1].classList.add("pagination__button_active"):paginationButtons[0].classList.add("pagination__button_active"),paginationButtons.forEach(function(e){e.addEventListener("click",function(e){page=e.target.classList.contains("pagination__number")?e.target.innerText:e.target.querySelector(".pagination__number").innerText,pageInput.value=page,filtersForm.submit()})});